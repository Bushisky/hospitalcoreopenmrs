<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">


    <changeSet id="hospital-core:2020-07-21-15:33" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance` (
            `ambulance_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`ambulance_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:38" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_driver table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_driver` (
            `driver_id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL,
            `address` varchar(255) DEFAULT NULL,
            `description` varchar(255) DEFAULT NULL,
            `phone` varchar(20) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `retired` bit(1) DEFAULT NULL,
            `retired_date` datetime DEFAULT NULL,
            PRIMARY KEY (`driver_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:43" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_receipt table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_receipt` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `paid_date` datetime DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=315 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="hospital-core:2020-07-21-15:47" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance_bill table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance_bill` (
            `ambulance__bill_id` int(11) NOT NULL AUTO_INCREMENT,
            `description` varchar(255) DEFAULT NULL,
            `creator` int(11) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `printed` bit(1) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `voided` bit(1) DEFAULT NULL,
            `voided_date` datetime DEFAULT NULL,
            `driver_id` int(11) DEFAULT NULL,
            `receipt_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`ambulance__bill_id`),
            KEY `fk_ambulancebill_driver` (`driver_id`),
            KEY `fk_ambulancebill_user` (`creator`),
            KEY `fk_ambulance_receipt` (`receipt_id`),
            CONSTRAINT `fk_ambulancebill_driver` FOREIGN KEY (`driver_id`) REFERENCES `billing_driver` (`driver_id`),
            CONSTRAINT `fk_ambulancebill_user` FOREIGN KEY (`creator`) REFERENCES `users` (`user_id`),
            CONSTRAINT `fk_ambulance_receipt` FOREIGN KEY (`receipt_id`) REFERENCES `billing_receipt` (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>

    <changeSet id="hospital-core:2020-07-21-15:51" author="ningosi">
        <preConditions onFail="MARK_RAN" onError="WARN">
            <dbms type="mysql"/>
        </preConditions>
        <comment>creating the billing_ambulance_bill_item table</comment>
        <sql>
            CREATE TABLE IF NOT EXISTS `billing_ambulance_bill_item` (
            `ambulance__bill_item_id` int(11) NOT NULL AUTO_INCREMENT,
            `ambulance_id` int(11) DEFAULT NULL,
            `ambulance_bill_id` int(11) DEFAULT NULL,
            `number_of_trip` int(11) DEFAULT NULL,
            `amount` decimal(19,2) DEFAULT NULL,
            `name` varchar(255) DEFAULT NULL,
            `created_date` datetime DEFAULT NULL,
            `voided` bit(1) DEFAULT NULL,
            `voided_date` datetime DEFAULT NULL,
            `patient_name` varchar(50) DEFAULT NULL,
            `receipt_number` varchar(13) DEFAULT NULL,
            `origin` varchar(20) DEFAULT NULL,
            `destination` varchar(20) DEFAULT NULL,
            PRIMARY KEY (`ambulance__bill_item_id`),
            KEY `fk_ambulancebillitem_ambulancebill` (`ambulance_bill_id`),
            KEY `fk_ambulancebillitem_ambulance` (`ambulance_id`),
            CONSTRAINT `fk_ambulancebillitem_ambulance` FOREIGN KEY (`ambulance_id`) REFERENCES `billing_ambulance` (`ambulance_id`),
            CONSTRAINT `fk_ambulancebillitem_ambulancebill` FOREIGN KEY (`ambulance_bill_id`) REFERENCES `billing_ambulance_bill` (`ambulance__bill_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
</databaseChangeLog>
